/**
 * provides an interface for a player to create their character
 * @author DeusBlu
 * @version 0.1_8
 *
 */
public class CreatePlayer 
{
	private final String[] STATS = {
			"Str", "Dex", "Con", "Int", "Wis", "Chr"
	};
    private static final String[] YES = {
    	"yes", "y"
    };
    private static final String[] NO = {
    	"no", "n"
    };
	public static final String LAND = "UNKNOWN";
	private InputReader reader;
	private String name;
	private int age;
	private int str;
	private int dex;
	private int con;
	private int intel;
	private int wis;
	private int chr;
	private int[] rolls;
	
	
	public CreatePlayer()
	{
		reader = new InputReader();
		rolls = new int[12];
		int age = 0;
		int str = 0;
		int dex = 0;
		int con = 0;
		int intel = 0;
		int wis = 0;
		int chr = 0;
	}
	
	public void start()
	{
		System.out.println("Hello traveler, welcome to the land of "+LAND+"!");
		System.out.println("\nThese lands are dangerous and we need a name");
		System.out.println(" to put on your Tombstone");
		getName();
		System.out.println();
		System.out.println("Welcome to "+LAND+" "+name);
		System.out.println("Lets see how the gods favor your prowess");
		getStats();
	}
	
	private void getName()
	{
		boolean done = false;
		while(!done){
			System.out.print(">");
			String name = reader.readString();
			if(name!= null && !name.isEmpty()){
				this.name = name;
				done = true;
			}
			else{
				System.out.println("Your name cannot be empty");
			}
		}
	}
	
	private void getStats()
	{
		Dice dice = new Dice();
		boolean done = false;
		System.out.println();
		System.out.println("Lets see what we have to work with");
		for(int i = 0; i < rolls.length; i++){
			rolls[i] = dice.roll(3, 6);
		}
		while(!done){
			for(int i = 0; i < STATS.length; i++){
				printStatChoices();
				setStat(STATS[i]);
			}
			if(confirmStats()){
				done = true;
			}
		}
	}
	
	private void setStat(String stat)
	{
		System.out.println("set "+stat+" to #?");
		int input = 0;
		boolean set = false;
		while(!set){
			System.out.print(">");
			input = reader.readInt();
			if(rolls[input-1] >= 0){
				if(stat.equalsIgnoreCase("str")){
					str = rolls[input-1];
					set = true;
				}
				if(stat.equalsIgnoreCase("dex")){
					dex = rolls[input-1];
					set = true;
				}
				if(stat.equalsIgnoreCase("con")){
					con = rolls[input-1];
					set = true;
				}
				if(stat.equalsIgnoreCase("int")){
					intel = rolls[input-1];
					set = true;
				}
				if(stat.equalsIgnoreCase("wis")){
					wis = rolls[input-1];
					set = true;
				}
				if(stat.equalsIgnoreCase("chr")){
					chr = rolls[input-1];
					set = true;
				}
				else{
					System.out.println("Selection not valid");
					printStatChoices();
				}
			}
		}
		rolls[input-1] = 0;
	}
	
	private boolean confirmStats()
	{
		boolean keep = true;
		System.out.println();
		System.out.println("Keep these stats?");
		System.out.print(">");
		String input = null;
		boolean done = false;
		while(!done){
			input = reader.readString();
			for(int i=0; i < YES.length; i++){
                if(input.equalsIgnoreCase(YES[i])){
                	done = true;
                	keep = true;
                }
            }
            for(int i=0; i < NO.length; i++){
                if(input.equalsIgnoreCase(NO[i])){
                     done = true;
                     keep = false;
                }
            }
		}
		return keep;
	}
	
	private void printStatChoices()
	{
		for(int i = 0; i < (rolls.length/2); i++){
			int add = rolls.length/2;
			printStat(i);
			System.out.println("\t");
			printStat(i+add);
			System.out.println();
		}
	}
	
	private void printStat(int stat)
	{
		System.out.print("# "+stat+" "+rolls[stat]);
	}
}
