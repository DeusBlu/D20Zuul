/**
 * represents items that have magical properties that can be activated by a use command such as wand's
 * and potion's
 * @author DeusBlu
 * @version 0.1_8
 *
 */
public class MagicDevice extends Item {
	private String[] EFFECT = {
			"damage", "healing", "buff", "misc"
	};
	private int charges;
	private String effect;
	private Damage effectValue;
	private String type;

	public MagicDevice() {
		super();
		effectValue = new Damage();
		setCharges(0);
		setEffect("misc");
		setEffectValue(effectValue);
		setType();
		
	}

	/**
	 * constructor for MagicDevices
	 * @param weight
	 * @param value
	 * @param name
	 * @param charges
	 * @param effect
	 * @param effectValue
	 */
	public MagicDevice(double weight, int value, String name, int charges, 
			String effect, Damage effectValue) {
		super(weight, value, name);
		setCharges(charges);
		setEffect(effect);
		setEffectValue(effectValue);
		setType();
	}
	
	/**
	 * sets the charges the item has, 0 is unlimited, sets to 0 if negative number given
	 * @param charges
	 */
	private void setCharges(int charges)
	{
		if(charges > 0){
			this.charges = charges;
		}
		else{
			this.charges = 0;
		}
	}
	
	/**
	 * sets the effect type of the item, throws exception if the type is not valid
	 * @param effect
	 */
	private void setEffect(String effect)
	{
		for(int i = 0; i < EFFECT.length; i++){
			if(effect.equalsIgnoreCase(EFFECT[i]))
				this.effect = effect;
		}
		if(this.effect == null){
			throw new IllegalArgumentException("Effect of item " + getName() + " is not a valid effect type");
		}
	}
	
	/**
	 * sets the effect value, a damage object to hold dice and modifiers
	 * @param effectValue
	 */
	private void setEffectValue(Damage effectValue)
	{
		if(effectValue != null){
			this.effectValue = effectValue;
		}
		else{
			this.effectValue = new Damage();
		}
	}
	/**
	 * sets the item type
	 */
	private void setType()
	{
		type = "Magic Device";
	}
}
