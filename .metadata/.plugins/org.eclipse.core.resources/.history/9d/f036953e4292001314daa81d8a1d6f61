/**
 * Write a description of class Combat here.
 * 
 * @author (DeusBlu) 
 * @version (0.1_5)
 */
public class Combat
{
    private Dice dice;
    private Entity opponent;
    private Entity player;
    
    /**
     * default constructor for class Combat
     */
    public Combat()
    {
        dice = new Dice();
    }
    /**
     * Constructor for Combat
     * @param Opponent - the opponent for the combat
     * @param Player - the character for the combat
     */
    public Combat(Entity opponent, Entity player)
    {
        dice = new Dice();
        setPlayer(player);
        setOpponent(opponent);
    }
    
    /**
     * loads a Player into the combat
     * @param player - the player character to use for combat
     */
    private void setPlayer(Entity player)
    {
        if(player != null){
            this.player = player;
        }
        else{
            throw new IllegalArgumentException("Player for combat was null");
        }
    }
    
    /**
     * loads the opponent for the combat round
     */
    private void setOpponent(Entity opponent)
    {
    	if(opponent != null){
    		this.opponent = opponent;
    	}
    	else{
    		throw new IllegalArgumentException("Opponent for combat was null");
    	}
    }
    
    /**
     * returns the player character that is being used for combat
     * @return Player
     */
    public Emtity getPlayer()
    {
        if(player != null){
            return player;
        }
        else{
            return null;
        }
    }
    
    /**
     * returns the opponent that is being used for combat
     * @return Opponent
     */
    public Entity getOpponent()
    {
        if(opponent != null){
            return opponent;
        }
        else{
            return null;
        }
    }
    
    /**
     * makes the object player melee attack the object opponent
     */
    public void playerAttack()
    {
        int roll = dice.roll(1, 20);
        roll++;
        if(roll == 20){
            hit();
        }
        else if(roll == 1){
            miss();
        }
        else{
            if(roll + ((Entity)player).getMeleeAttackMod() > opponent.getArmor()){
                hit();
            }
            else{
                miss();
            }
        }
    }
    
    /**
     * makes the object player damage the object opponent
     */
    private void hit()
    {
        int delt = player.getDamage();
        System.out.println(player.getName() + " hit " + opponent.getName());
        System.out.println(opponent.getName() + " takes " + delt + " damage!");
        opponent.takeDamage(delt);
    }
    
    /**
     * makes the player object swing and miss
     */
    private void miss()
    {
        System.out.println(player.getName() + " missed the " + opponent.getName());
    }
}
